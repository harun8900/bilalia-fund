<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صندوق البلالية الطبي</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg-body: #050a18;
            --card-bg: #0f172a;
            --accent-cyan: #00d2ff;
            --accent-green: #00e676;
            --danger: #ff5252;
            --gold: #ffd700;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background-color: var(--bg-body);
            color: #ffffff;
            margin: 0;
            padding: 0;
        }

        /*Header Styles*/
        .header {
            padding: 40px 20px;
            text-align: center;
            background: linear-gradient(180deg, #111a2e 0%, var(--bg-body) 100%);
            border-bottom: 2px solid var(--accent-cyan);
        }
        .header h1 { margin: 0; font-size: 32px; letter-spacing: 1px; }
        .header .dev-name { color: var(--accent-cyan); font-size: 16px; margin-top: 10px; font-weight: bold; }

        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }

        /* Dashboard Stats */
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .stat-box {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.05);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        .stat-box i { font-size: 30px; margin-bottom: 10px; color: var(--accent-cyan); }
        .stat-val { font-size: 26px; font-weight: bold; display: block; margin-top: 5px; }

        /* Sections */
        .section {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            border: 1px solid rgba(255,255,255,0.08);
        }
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-right: 5px solid var(--accent-cyan);
            padding-right: 15px;
            margin-bottom: 20px;
        }

        /* Admin Panel */
        .admin-area {
            background: rgba(0, 210, 255, 0.03);
            border: 1px dashed var(--accent-cyan);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }
        input, select {
            background: #1e293b;
            border: 1px solid #334155;
            color: white;
            padding: 12px;
            border-radius: 10px;
            margin: 5px;
            font-size: 14px;
        }
        .btn {
            padding: 12px 25px;
            border-radius: 10px;
            border: none;
            cursor: pointer;
            font-weight: bold;
            transition: 0.3s;
        }
        .btn-add { background: var(--accent-cyan); color: #000; }
        .btn-month { background: var(--gold); color: #000; }
        .btn-delete { background: var(--danger); color: white; padding: 5px 10px; font-size: 11px; }

        /* Tables */
        .table-res { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th { background: #1e293b; color: var(--accent-cyan); padding: 15px; text-align: right; }
        td { padding: 15px; border-bottom: 1px solid rgba(255,255,255,0.05); }

        .hidden { display: none; }
        .rules-text { font-size: 14px; color: #cbd5e1; line-height: 1.8; }
        .manager-tag { background: #1e293b; padding: 5px 15px; border-radius: 20px; font-size: 13px; margin: 5px; display: inline-block; border: 1px solid var(--accent-cyan); }

        footer { text-align: center; padding: 60px; color: #64748b; border-top: 1px solid #1e293b; }
    </style>
</head>
<body>

<div class="header">
    <h1>صندوق البلالية الطبي</h1>
    <div class="dev-name">برمجة وتنفيذ: محمد هارون</div>
</div>

<div class="container">
    <div class="dashboard">
        <div class="stat-box">
            <i class="fas fa-calendar-alt"></i>
            <span class="stat-label">الشهر الحالي</span>
            <span id="current-month-display" class="stat-val" style="color:var(--gold)">يناير 2026</span>
        </div>
        <div class="stat-box">
            <i class="fas fa-users"></i>
            <span class="stat-label">إجمالي المشتركين</span>
            <span id="stat-count" class="stat-val">0</span>
        </div>
        <div class="stat-box">
            <i class="fas fa-money-bill-wave"></i>
            <span class="stat-label">إجمالي الليرة</span>
            <span id="stat-syp" class="stat-val" style="color:var(--accent-green)">0</span>
        </div>
        <div class="stat-box">
            <i class="fas fa-dollar-sign"></i>
            <span class="stat-label">إجمالي الدولار</span>
            <span id="stat-usd" class="stat-val" style="color:var(--gold)">0</span>
        </div>
    </div>

    <div class="section admin-area">
        <div id="lock-screen">
            <h3><i class="fas fa-lock"></i> لوحة الإدارة</h3>
            <input type="password" id="pass-input" placeholder="أدخل كلمة السر">
            <button class="btn btn-add" onclick="checkPass()">دخول</button>
        </div>
        
        <div id="admin-controls" class="hidden">
            <h3 style="color: var(--accent-green)">مرحباً محمد! لوحة الإدارة جاهزة.</h3>
            <div style="display: flex; flex-wrap: wrap; gap: 20px;">
                <div style="flex: 1; min-width: 250px;">
                    <h4>إضافة مشترك</h4>
                    <input type="text" id="m-name" placeholder="الاسم">
                    <input type="number" id="m-amount" placeholder="المبلغ">
                    <select id="m-cur"><option value="SYP">ليرة سورية</option><option value="USD">دولار أمريكي</option></select>
                    <button class="btn btn-add" onclick="addMember()">حفظ</button>
                </div>
                <div style="flex: 1; min-width: 250px;">
                    <h4>إدارة الأشهر</h4>
                    <input type="text" id="new-month-name" placeholder="اسم الشهر (مثلاً: فبراير 2026)">
                    <button class="btn btn-month" onclick="startNewMonth()">بدء شهر جديد</button>
                    <p style="font-size: 11px; color: var(--danger)">* بدء شهر جديد سيقوم بأرشفة بيانات الشهر الحالي.</p>
                </div>
            </div>
            <div style="margin-top: 20px; border-top: 1px solid #334155; padding-top: 15px;">
                <h4>إضافة مصروف جديد</h4>
                <input type="text" id="e-desc" placeholder="البيان">
                <input type="number" id="e-val" placeholder="القيمة">
                <button class="btn btn-add" onclick="addExpense()">إضافة للمصروفات</button>
            </div>
        </div>
    </div>

    <div class="section">
        <div class="section-header"><div style="font-size: 20px; font-weight: bold; color: var(--accent-cyan)">عن المشروع والقوانين</div></div>
        <p style="color: var(--accent-green); font-weight: bold;">قال تعالى: (وتعاونوا على البر والتقوى ولا تعاونوا على الإثم والعدوان)</p>
        <div class="rules-text">
            نظراً لضيق المعيشة، تم تفعيل الصندوق الطبي. <b>الشروط:</b><br>
            1. إدارة الصندوق هي المسؤولة عن التقييم وأمر الصرف.<br>
            2. الصندوق تأمين صحي للمشتركين (وفاة، عملية، حوادث طارئة).<br>
            3. لا يتم صرف الراشتات الدوائية. الحد الأدنى للدفع 25 ألف شهرياً.
        </div>
    </div>

    <div class="section">
        <div class="section-header"><div style="font-size: 18px; color: var(--accent-cyan)">القائمون على الإدارة</div></div>
        <div id="managers">
            <span class="manager-tag">قاسم طالب</span> <span class="manager-tag">رامي باكير</span>
            <span class="manager-tag">حسن الخطيب</span> <span class="manager-tag">ضياء شحادة</span>
            <span class="manager-tag">نورس عبد السلام</span> <span class="manager-tag">محمد قويدر</span>
            <span class="manager-tag">هشام الخطيب</span>
        </div>
    </div>

    <div class="section">
        <div class="section-header">
            <div style="font-size: 20px; font-weight: bold;">جدول المشتركين - <span id="table-month-title">يناير 2026</span></div>
        </div>
        <div class="table-res">
            <table>
                <thead><tr><th>#</th><th>المشترك</th><th>المبلغ</th><th>العملة</th><th class="admin-only hidden">حذف</th></tr></thead>
                <tbody id="member-rows"></tbody>
            </table>
        </div>
    </div>

    <button class="btn btn-month" style="margin-bottom: 20px; width: 100%;" onclick="toggleExpenses()">إظهار / إخفاء قسم المصروفات <i class="fas fa-eye"></i></button>
    <div id="expense-section" class="section hidden">
        <div class="section-header"><div style="font-size: 20px; font-weight: bold; color: var(--danger)">سجل المصروفات</div></div>
        <div class="table-res">
            <table>
                <thead><tr><th>البيان</th><th>المبلغ (ل.س)</th><th class="admin-only hidden">حذف</th></tr></thead>
                <tbody id="expense-rows"></tbody>
            </table>
            <h3 style="text-align: left; color: var(--danger)">مجموع المصاريف: <span id="total-expenses-val">0</span> ل.س</h3>
        </div>
    </div>
</div>

<footer>
    Muhammed Harun 2026®<br>
    التطبيق محمي ويقوم بحفظ البيانات تلقائياً
</footer>

<script>
    // App Logic
    let db = JSON.parse(localStorage.getItem('bilalia_db')) || {
        currentMonth: "يناير 2026",
        members: [],
        expenses: []
    };

    let isAdmin = false;

    function checkPass() {
        if(document.getElementById('pass-input').value === 'هارون456') {
            isAdmin = true;
            document.getElementById('lock-screen').classList.add('hidden');
            document.getElementById('admin-controls').classList.remove('hidden');
            document.querySelectorAll('.admin-only').forEach(el => el.classList.remove('hidden'));
            render();
        } else { alert('كلمة السر خاطئة!'); }
    }

    function addMember() {
        const name = document.getElementById('m-name').value;
        const amount = parseFloat(document.getElementById('m-amount').value);
        const cur = document.getElementById('m-cur').value;
        if(name && amount) {
            db.members.push({id: Date.now(), name, amount, cur});
            updateDB();
        }
    }

    function addExpense() {
        const desc = document.getElementById('e-desc').value;
        const val = parseFloat(document.getElementById('e-val').value);
        if(desc && val) {
            db.expenses.push({id: Date.now(), desc, val});
            updateDB();
        }
    }

    function startNewMonth() {
        const nextMonth = document.getElementById('new-month-name').value;
        if(nextMonth) {
            if(confirm('هل أنت متأكد؟ سيتم تصفير الجدول لبدء شهر جديد مع حفظ الأرشيف.')) {
                db.currentMonth = nextMonth;
                db.members = []; // تصفير المشتركين للشهر الجديد
                db.expenses = []; // تصفير المصروفات للشهر الجديد
                updateDB();
            }
        }
    }

    function deleteMember(id) {
        db.members = db.members.filter(m => m.id !== id);
        updateDB();
    }

    function deleteExpense(id) {
        db.expenses = db.expenses.filter(e => e.id !== id);
        updateDB();
    }

    function toggleExpenses() {
        document.getElementById('expense-section').classList.toggle('hidden');
    }

    function updateDB() {
        localStorage.setItem('bilalia_db', JSON.stringify(db));
        render();
    }

    function render() {
        document.getElementById('current-month-display').innerText = db.currentMonth;
        document.getElementById('table-month-title').innerText = db.currentMonth;

        let mHtml = '', eHtml = '', syp = 0, usd = 0, expTot = 0;

        db.members.forEach((m, i) => {
            mHtml += `<tr>
                <td>${i+1}</td>
                <td>${m.name}</td>
                <td>${m.amount.toLocaleString()}</td>
                <td style="color:${m.cur === 'USD' ? 'var(--gold)' : 'var(--accent-green)'}">${m.cur}</td>
                <td class="admin-only ${isAdmin ? '' : 'hidden'}"><button class="btn-delete" onclick="deleteMember(${m.id})">حذف</button></td>
            </tr>`;
            if(m.cur === 'USD') usd += m.amount; else syp += m.amount;
        });

        db.expenses.forEach(e => {
            eHtml += `<tr>
                <td>${e.desc}</td>
                <td>${e.val.toLocaleString()}</td>
                <td class="admin-only ${isAdmin ? '' : 'hidden'}"><button class="btn-delete" onclick="deleteExpense(${e.id})">حذف</button></td>
            </tr>`;
            expTot += e.val;
        });

        document.getElementById('member-rows').innerHTML = mHtml;
        document.getElementById('expense-rows').innerHTML = eHtml;
        document.getElementById('stat-count').innerText = db.members.length;
        document.getElementById('stat-syp').innerText = syp.toLocaleString() + ' ل.س';
        document.getElementById('stat-usd').innerText = usd.toLocaleString() + ' $';
        document.getElementById('total-expenses-val').innerText = expTot.toLocaleString();
    }

    render();
</script>
</body>
    </html>
    
