<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ·Ø¨ÙŠÙ‚ ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø¨Ù„Ø§Ù„ÙŠØ© Ø§Ù„Ø·Ø¨ÙŠ | Ø§Ù„Ø´Ø§Ù…Ù„</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        :root {
            --bg-body: #050a18;
            --card-bg: #0f172a;
            --accent-blue: #00d2ff;
            --accent-green: #00e676;
            --danger: #ff5252;
            --gold: #ffd700;
            --text-dim: #94a3b8;
        }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background-color: var(--bg-body); color: white; margin: 0; padding: 0; }
        
        /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù„ÙˆØ¬Ùˆ - ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù‡Ù†Ø§ */
        .logo-wrapper {
            position: absolute;
            top: 15px;
            right: 20px;
        }
        .logo-wrapper img {
            width: 75px;
            height: 75px;
            border-radius: 50%;
            border: 2px solid #ffffff;
            object-fit: cover;
            box-shadow: 0 0 15px rgba(0, 210, 255, 0.3);
        }

        .header { position: relative; padding: 30px; text-align: center; background: linear-gradient(180deg, #111a2e 0%, var(--bg-body) 100%); border-bottom: 2px solid var(--accent-blue); }
        .dev-name { color: var(--accent-blue); font-size: 14px; font-weight: bold; margin-top: 5px; }
        .container { max-width: 1200px; margin: 0 auto; padding: 15px; }

        /* Ø´Ø±ÙˆØ· Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ ÙˆØ§Ù„Ù‚Ø§Ø¦Ù…ÙŠÙ† Ø¹Ù„ÙŠÙ‡ */
        .info-section { background: var(--card-bg); border: 1px solid rgba(0,210,255,0.2); border-radius: 15px; padding: 25px; margin-bottom: 25px; line-height: 1.8; }
        .info-title { color: var(--accent-blue); border-bottom: 1px solid #334155; padding-bottom: 10px; margin-bottom: 15px; display: flex; align-items: center; gap: 10px; }
        .managers-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px; margin-top: 15px; }
        .manager-item { background: rgba(0,210,255,0.05); padding: 8px; border-radius: 8px; border: 1px solid rgba(0,210,255,0.1); text-align: center; font-size: 14px; }

        .dashboard { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 15px; margin-bottom: 25px; }
        .stat-card { background: var(--card-bg); padding: 20px; border-radius: 12px; text-align: center; border: 1px solid rgba(255,255,255,0.05); box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
        .stat-card span { display: block; font-size: 20px; font-weight: bold; margin-top: 8px; }

        .admin-lock-zone { background: rgba(0,210,255,0.03); padding: 25px; border-radius: 15px; border: 1px dashed var(--accent-blue); margin-bottom: 25px; }
        input, select { background: #1a253d; border: 1px solid #334155; color: white; padding: 10px; border-radius: 8px; margin: 5px; outline: none; transition: 0.3s; }
        .btn { padding: 10px 20px; border-radius: 8px; border: none; cursor: pointer; font-weight: bold; transition: 0.3s; display: inline-flex; align-items: center; gap: 8px; }
        .btn-blue { background: var(--accent-blue); color: #000; }
        .btn-gold { background: var(--gold); color: #000; }
        .btn-del { background: var(--danger); color: white; font-size: 11px; padding: 6px 12px; }
        .btn-toggle { background: #1e293b; color: var(--gold); border: 1px solid var(--gold); width: 100%; justify-content: center; margin-bottom: 20px; }
        
        .hidden { display: none !important; }

        .month-block { margin-bottom: 40px; border: 1px solid rgba(0,210,255,0.15); border-radius: 18px; overflow: hidden; background: var(--card-bg); }
        .month-header { background: #152036; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid rgba(255,255,255,0.05); }
        table { width: 100%; border-collapse: collapse; }
        th { background: rgba(255,255,255,0.02); color: var(--text-dim); padding: 12px; text-align: right; font-size: 13px; }
        td { padding: 12px; border-bottom: 1px solid rgba(255,255,255,0.03); font-size: 14px; }

        footer { text-align: center; padding: 50px; color: #475569; font-size: 12px; }

        /* Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„Ø¬ÙˆØ§Ù„ Ù„Ù„ÙˆØ¬Ùˆ */
        @media (max-width: 600px) {
            .logo-wrapper { position: static; margin-bottom: 10px; display: block; }
            .header { padding-top: 20px; }
        }
    </style>
</head>
<body>

<div class="header">
    <div class="logo-wrapper">
        <img src="Loogo.png" alt="Logo" onerror="this.src='https://via.placeholder.com/75?text=Logo'">
    </div>
    <h1>ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø¨Ù„Ø§Ù„ÙŠØ© Ø§Ù„Ø·Ø¨ÙŠ</h1>
    <div class="dev-name">Ø¨Ø±Ù…Ø¬Ø© ÙˆØªÙ†ÙÙŠØ°: Ù…Ø­Ù…Ø¯ Ù‡Ø§Ø±ÙˆÙ†</div>
</div>

<div class="container">
    
    <div class="info-section">
        <div class="info-title"><i class="fas fa-hand-holding-heart"></i> Ù…ÙŠØ«Ø§Ù‚ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø·Ø¨ÙŠ</div>
        <p style="text-align: center; font-style: italic; color: var(--accent-green);">"Ù‚Ø§Ù„ ØªØ¹Ø§Ù„Ù‰: ÙˆÙØªÙØ¹ÙØ§ÙˆÙÙ†ÙÙˆØ§ Ø¹ÙÙ„ÙÙ‰ Ø§Ù„Ù’Ø¨ÙØ±Ù‘Ù ÙˆÙØ§Ù„ØªÙ‘ÙÙ‚Ù’ÙˆÙÙ‰Ù° ÙˆÙÙ„ÙØ§ ØªÙØ¹ÙØ§ÙˆÙÙ†ÙÙˆØ§ Ø¹ÙÙ„ÙÙ‰ Ø§Ù„Ù’Ø¥ÙØ«Ù’Ù…Ù ÙˆÙØ§Ù„Ù’Ø¹ÙØ¯Ù’ÙˆÙØ§Ù†Ù"</p>
        <p style="font-size: 14px; color: var(--text-dim);">Ù†Ø¸Ø±Ø§Ù‹ Ù„Ø¶ÙŠÙ‚ Ø§Ù„Ù…Ø¹ÙŠØ´Ø©ØŒ ØªÙ‚Ø±Ø± ØªÙØ¹ÙŠÙ„ Ù‡Ø°Ø§ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ Ù„Ù„Ø£Ù…ÙˆØ± Ø§Ù„Ø·Ø§Ø±Ø¦Ø©:</p>
        <ul style="font-size: 14px; padding-right: 20px;">
            <li>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ Ù‡ÙŠ Ø§Ù„ØªÙŠ ØªØ­Ø¯Ø¯ ÙˆØªÙ‚ÙŠÙ… Ù†ÙˆØ¹ Ø§Ù„Ø­Ø§Ø¯Ø« ÙˆÙ‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹ ÙˆØ§Ù„Ù…Ø³Ø¤ÙˆÙ„Ø© Ø¹Ù† Ø§Ù„ØµØ±Ù.</li>
            <li>ÙŠØ¹Ø¯ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ ØªØ£Ù…ÙŠÙ†Ø§Ù‹ ØµØ­ÙŠØ§Ù‹ Ù„Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ† ÙÙ‚Ø· ÙÙŠ Ø­Ø§Ù„Ø§Øª (Ø§Ù„ÙˆÙØ§Ø©ØŒ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§ØªØŒ Ø§Ù„Ø­ÙˆØ§Ø¯Ø« Ø§Ù„Ø·Ø§Ø±Ø¦Ø©).</li>
            <li style="color: var(--danger);">Ù…Ù„Ø§Ø­Ø¸Ø©: Ù„Ø§ ÙŠÙ…ÙƒÙ† ØµØ±Ù Ø§Ù„Ø±ÙˆØ´ØªØ§Øª Ø§Ù„Ø¯ÙˆØ§Ø¦ÙŠØ©.</li>
            <li>Ø§Ù„Ø¯ÙØ¹ Ø¯ÙˆØ±ÙŠ Ø´Ù‡Ø±ÙŠ (Ø£ÙˆÙ„ 10 Ø£ÙŠØ§Ù… Ù…Ù† Ø§Ù„Ø´Ù‡Ø±) Ø¨Ø­Ø¯ Ø£Ø¯Ù†Ù‰ 25 Ø£Ù„Ù Ù„ÙŠØ±Ø© Ø³ÙˆØ±ÙŠØ©.</li>
        </ul>
        <div class="info-title" style="margin-top:20px;"><i class="fas fa-users-cog"></i> Ø§Ù„Ù‚Ø§Ø¦Ù…ÙˆÙ† Ø¹Ù„Ù‰ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚</div>
        <div class="managers-grid">
            <div class="manager-item">Ù‚Ø§Ø³Ù… Ø·Ø§Ù„Ø¨</div>
            <div class="manager-item">Ø¶ÙŠØ§Ø¡ Ø´Ø­Ø§Ø¯Ø©</div>
            <div class="manager-item">Ø­Ø³Ù† Ø§Ù„Ø®Ø·ÙŠØ¨</div>
            <div class="manager-item">Ø±Ø§Ù…ÙŠ Ø¨Ø§ÙƒÙŠØ±</div>
            <div class="manager-item">Ù†ÙˆØ±Ø³ Ø¹Ø¨Ø¯ Ø§Ù„Ø³Ù„Ø§Ù…</div>
            <div class="manager-item">Ù…Ø­Ù…Ø¯ Ù‚ÙˆÙŠØ¯Ø±</div>
            <div class="manager-item">Ù‡Ø´Ø§Ù… Ø§Ù„Ø®Ø·ÙŠØ¨</div>
        </div>
        <p style="text-align: center; margin-top: 15px; color: var(--gold); font-weight: bold;">(Ù†Ø³Ø£Ù„ Ø§Ù„Ù„Ù‡ Ø§Ù„ØªÙˆÙÙŠÙ‚)</p>
    </div>

    <div class="dashboard">
        <div class="stat-card">Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„ÙƒÙ„ÙŠ (Ù„ÙŠØ±Ø©) <span id="total-syp-val" style="color:var(--accent-green)">0</span></div>
        <div class="stat-card">Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„ÙƒÙ„ÙŠ (Ø¯ÙˆÙ„Ø§Ø±) <span id="total-usd-val" style="color:var(--gold)">0</span></div>
        <div class="stat-card">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª (Ù„ÙŠØ±Ø©) <span id="total-exp-syp" style="color:var(--danger)">0</span></div>
        <div class="stat-card">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª (Ø¯ÙˆÙ„Ø§Ø±) <span id="total-exp-usd" style="color:#ff8c00">0</span></div>
    </div>

    <div class="admin-lock-zone">
        <div id="lock-ui" style="text-align: center;">
            <p><i class="fas fa-shield-alt"></i> Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ù…Ø­Ù…ÙŠØ©</p>
            <input type="password" id="pass-input" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±"> <button class="btn btn-blue" onclick="activateAdmin()">ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ­ÙƒÙ…</button>
        </div>
        
        <div id="admin-ui" class="hidden">
            <h4 style="color:var(--accent-green);">Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©: Ù…Ø­Ù…Ø¯ Ù‡Ø§Ø±ÙˆÙ† âœ…</h4>
            <div style="margin-bottom: 20px;">
                <input type="text" id="month-name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯">
                <button class="btn btn-gold" onclick="addNewMonth()">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø´Ù‡Ø±</button>
            </div>
            
            <div id="entry-form">
                <select id="target-month-select"></select>
                <input type="text" id="item-name" placeholder="Ø§Ù„Ø§Ø³Ù… / Ø§Ù„Ø¨ÙŠØ§Ù†">
                <input type="number" id="item-amount" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº">
                <select id="item-cur">
                    <option value="SYP">Ù„ÙŠØ±Ø© Ø³ÙˆØ±ÙŠØ©</option>
                    <option value="USD">Ø¯ÙˆÙ„Ø§Ø± Ø£Ù…Ø±ÙŠÙƒÙŠ</option>
                </select>
                <select id="item-type">
                    <option value="ØªÙˆÙÙŠØ±">Ø¥Ø¶Ø§ÙØ© Ù…Ø´ØªØ±Ùƒ (+)</option>
                    <option value="Ù…ØµØ±ÙˆÙ">Ø¥Ø¶Ø§ÙØ© Ù…ØµØ±ÙˆÙ (-)</option>
                </select>
                <button class="btn btn-blue" onclick="saveToDB()">Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
            </div>
        </div>
    </div>

    <button class="btn btn-toggle" onclick="toggleExpensesDisplay()">
        <i class="fas fa-eye"></i> <span id="btn-toggle-text">Ø¥Ø¸Ù‡Ø§Ø± / Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</span>
    </button>

    <div id="main-content-area"></div>
</div>

<footer> Muhammed Harun 2026Â® </footer>

<script>
    // ØªÙ… ØªØµØ­ÙŠØ­ Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ù‡Ù†Ø§ Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø±Ø¨Ø· Ø§Ù„Ø³Ù„ÙŠÙ…
    const S_URL = "https://xuiwkvkrhatcoovfozsq.supabase.co";
    const S_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh1aXdrdmtyaGF0Y29vdmFvenNxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk4NzA0NzYsImV4cCI6MjA4NTQ0NjQ3Nn0.Bp0ZyYi8O95jZhtALxxJwK6MQWau1WGGaBoUes5f3os";
    const _db = supabase.createClient(S_URL, S_KEY);

    let isEdit = false;
    let hideExpenses = false;

    async function activateAdmin() {
        if(document.getElementById('pass-input').value === 'Ù‡Ø§Ø±ÙˆÙ†567') {
            isEdit = true;
            document.getElementById('lock-ui').classList.add('hidden');
            document.getElementById('admin-ui').classList.remove('hidden');
            render();
        } else { alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± ØºÙŠØ± ØµØ­ÙŠØ­Ø©'); }
    }

    function toggleExpensesDisplay() {
        hideExpenses = !hideExpenses;
        render();
    }

    async function addNewMonth() {
        let n = document.getElementById('month-name').value;
        if(!n) return;
        const { error } = await _db.from('months').insert([{ name: n }]);
        if(!error) { 
            document.getElementById('month-name').value = ''; 
            render(); 
        } else {
            console.error("Error adding month:", error);
            alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø´Ù‡Ø±");
        }
    }

    async function saveToDB() {
        let mId = document.getElementById('target-month-select').value;
        let name = document.getElementById('item-name').value;
        let amt = document.getElementById('item-amount').value;
        let cur = document.getElementById('item-cur').value;
        let type = document.getElementById('item-type').value;

        if(!mId || !name || !amt) return alert('Ø£ÙƒÙ…Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
        const { error } = await _db.from('data').insert([{ month_id: mId, name, amt, cur, type }]);
        if(!error) {
            document.getElementById('item-name').value = '';
            document.getElementById('item-amount').value = '';
            render();
        }
    }

    async function deleteItem(id, table) {
        if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ')) return;
        await _db.from(table).delete().eq('id', id);
        render();
    }

    async function render() {
        const { data: months } = await _db.from('months').select('*').order('id', {ascending: false});
        const { data: allData } = await _db.from('data').select('*');

        let area = document.getElementById('main-content-area');
        let select = document.getElementById('target-month-select');
        area.innerHTML = ''; select.innerHTML = '';

        let gSypIn = 0, gUsdIn = 0, gSypOut = 0, gUsdOut = 0;

        months?.forEach(m => {
            select.innerHTML += `<option value="${m.id}">${m.name}</option>`;
            let mRows = '', eRows = '';
            let monthData = allData?.filter(d => d.month_id == m.id) || [];

            monthData.forEach(d => {
                let row = `<tr><td>${d.name}</td><td>${parseFloat(d.amt).toLocaleString()}</td><td style="color:${d.cur=='USD'?'var(--gold)':'var(--accent-green)'}">${d.cur}</td>
                <td class="${isEdit?'':'hidden'}"><button class="btn-del" onclick="deleteItem(${d.id}, 'data')">Ø­Ø°Ù</button></td></tr>`;
                
                if(d.type === 'ØªÙˆÙÙŠØ±') {
                    mRows += row;
                    if(d.cur === 'USD') gUsdIn += parseFloat(d.amt); else gSypIn += parseFloat(d.amt);
                } else {
                    eRows += row;
                    if(d.cur === 'USD') gUsdOut += parseFloat(d.amt); else gSypOut += parseFloat(d.amt);
                }
            });

            area.innerHTML += `
                <div class="month-block">
                    <div class="month-header">
                        <span style="color:var(--accent-blue); font-weight:bold;">ğŸ“… ${m.name}</span>
                        <button class="btn-del ${isEdit?'':'hidden'}" onclick="deleteItem(${m.id}, 'months')">Ø­Ø°Ù Ø§Ù„Ø´Ù‡Ø± Ø¨Ø§Ù„ÙƒØ§Ù…Ù„</button>
                    </div>
                    <div style="padding:10px;"><b>Ø§Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ†:</b></div>
                    <table><tbody>${mRows || '<tr><td colspan="4">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª</td></tr>'}</tbody></table>
                    
                    <div class="${hideExpenses ? 'hidden' : ''}">
                        <div style="padding:10px; background:rgba(255,0,0,0.05)"><b>Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª:</b></div>
                        <table><tbody>${eRows || '<tr><td colspan="4">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ØµØ±ÙˆÙØ§Øª</td></tr>'}</tbody></table>
                    </div>
                </div>`;
        });

        document.getElementById('total-syp-val').innerText = (gSypIn - gSypOut).toLocaleString();
        document.getElementById('total-usd-val').innerText = (gUsdIn - gUsdOut).toLocaleString();
        document.getElementById('total-exp-syp').innerText = gSypOut.toLocaleString();
        document.getElementById('total-exp-usd').innerText = gUsdOut.toLocaleString();
    }

    render();
</script>
</body>
</html>
